{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\mouss\\\\Documents\\\\GitHub\\\\ApiWeb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\mouss\\\\Documents\\\\GitHub\\\\ApiWeb\\\\src\\\\Login.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './Utils/Common';\n\nfunction Login(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n  const username = useFormInput('');\n  const password = useFormInput('');\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1]; // handle button click of login form\n\n\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n    axios.post('http://localhost:4000/users/signin', {\n      username: username.value,\n      password: password.value\n    }).then(response => {\n      setLoading(false);\n      setUserSession(response.data.token, response.data.user);\n      props.history.push('/dashboard');\n    }).catch(error => {\n      setLoading(false);\n      if (error.response.status === 401) setError(error.response.data.message);else setError(\"Something went wrong. Please try again later.\");\n    });\n  };\n\n  return React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, \"Log in\"), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, \"Username\"), React.createElement(\"input\", Object.assign({\n    type: \"text\"\n  }, username, {\n    className: \"form-control\",\n    autoComplete: \"new-password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", Object.assign({\n    type: \"password\"\n  }, password, {\n    className: \"form-control\",\n    autoComplete: \"new-password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"custom-control custom-checkbox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    className: \"custom-control-input\",\n    id: \"customCheck1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    className: \"custom-control-label\",\n    htmlFor: \"customCheck1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Remember me\"))), error && React.createElement(React.Fragment, null, React.createElement(\"small\", {\n    style: {\n      color: 'red'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, error), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    className: \"btn btn-dark btn-lg btn-block\",\n    value: loading ? 'Loading...' : 'Login',\n    onClick: handleLogin,\n    disabled: loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }));\n}\n\nconst useFormInput = initialValue => {\n  const _useState5 = useState(initialValue),\n        _useState6 = _slicedToArray(_useState5, 2),\n        value = _useState6[0],\n        setValue = _useState6[1];\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/mouss/Documents/GitHub/ApiWeb/src/Login.js"],"names":["React","useState","axios","setUserSession","Login","props","loading","setLoading","username","useFormInput","password","error","setError","handleLogin","post","value","then","response","data","token","user","history","push","catch","status","message","color","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { setUserSession } from './Utils/Common';\r\n\r\nfunction Login(props) {\r\n  const [loading, setLoading] = useState(false);\r\n  const username = useFormInput('');\r\n  const password = useFormInput('');\r\n  const [error, setError] = useState(null);\r\n\r\n  // handle button click of login form\r\n  const handleLogin = () => {\r\n    setError(null);\r\n    setLoading(true);\r\n    axios.post('http://localhost:4000/users/signin', { username: username.value, password: password.value }).then(response => {\r\n      setLoading(false);\r\n      setUserSession(response.data.token, response.data.user);\r\n      props.history.push('/dashboard');\r\n    }).catch(error => {\r\n      setLoading(false);\r\n      if (error.response.status === 401) setError(error.response.data.message);\r\n      else setError(\"Something went wrong. Please try again later.\");\r\n    });\r\n  }\r\n\r\n  return (\r\n    <form>\r\n      <h3>Log in</h3>\r\n      <div className=\"form-group\">\r\n      <label>Username</label>\r\n        <input type=\"text\" {...username} className=\"form-control\" autoComplete=\"new-password\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n      <label>Password</label>\r\n        <input type=\"password\" {...password} className=\"form-control\" autoComplete=\"new-password\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n      <div className=\"custom-control custom-checkbox\">\r\n        <input type=\"checkbox\" className=\"custom-control-input\" id=\"customCheck1\" />\r\n        <label className=\"custom-control-label\" htmlFor=\"customCheck1\">Remember me</label>\r\n      </div>\r\n      </div>\r\n\r\n\r\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\r\n      <input type=\"button\" className=\"btn btn-dark btn-lg btn-block\"  value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />\r\n      \r\n      </form>\r\n  );\r\n}\r\n\r\nconst useFormInput = initialValue => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  const handleChange = e => {\r\n    setValue(e.target.value);\r\n  }\r\n  return {\r\n    value,\r\n    onChange: handleChange\r\n  }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}